# SAIT_01 Distributed Mesh Project Configuration
# nRF Connect SDK v3.1.0 - nRF5340 target

# Core Bluetooth and Mesh Configuration
CONFIG_BT=y
# CONFIG_BT_DEBUG_LOG=y  # Disabled for production
CONFIG_BT_MESH=y
CONFIG_BT_MESH_RELAY=y
CONFIG_BT_MESH_FRIEND=y
CONFIG_BT_MESH_LOW_POWER=n
CONFIG_BT_MESH_PROXY=y
CONFIG_BT_MESH_PB_GATT=y
CONFIG_BT_MESH_PB_ADV=y
CONFIG_BT_MESH_GATT_PROXY=y

# Mesh Model Configuration
CONFIG_BT_MESH_MODEL_EXTENSIONS=y
CONFIG_BT_MESH_VENDOR_MODELS=y
# CONFIG_BT_MESH_SHELL=y  # Disabled for production

# Mesh Network Parameters
CONFIG_BT_MESH_CRPL=32
CONFIG_BT_MESH_MSG_CACHE_SIZE=32
CONFIG_BT_MESH_ADV_BUF_COUNT=20
CONFIG_BT_MESH_TX_SEG_MAX=6
CONFIG_BT_MESH_RX_SEG_MAX=6
CONFIG_BT_MESH_SUBNET_COUNT=2
CONFIG_BT_MESH_APP_KEY_COUNT=4

# Security and Encryption
CONFIG_BT_MESH_USES_MBEDTLS_PSA=y
CONFIG_PSA_WANT_GENERATE_RANDOM=y
CONFIG_PSA_WANT_ALG_CCM=y
CONFIG_PSA_WANT_ALG_ECB_NO_PADDING=y
CONFIG_PSA_WANT_ALG_CMAC=y
CONFIG_TRUSTED_STORAGE=y

# Device Tree and Board Support
CONFIG_DK_LIBRARY=y
CONFIG_SETTINGS=y
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_NVS=y

# Logging and Debug
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=2  # Reduced for production - warnings and errors only
CONFIG_LOG_MAX_LEVEL=2  # Reduced for production - warnings and errors only
CONFIG_SERIAL=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_SHELL=y
# CONFIG_KERNEL_SHELL=y  # Disabled for production

# Power Management
CONFIG_PM=y
CONFIG_PM_DEVICE=y
CONFIG_PM_DEVICE_RUNTIME=y

# Threading and Synchronization  
CONFIG_MAIN_STACK_SIZE=1536
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_ISR_STACK_SIZE=1024
CONFIG_HEAP_MEM_POOL_SIZE=8192

# Network Stack (for future IP connectivity)
CONFIG_NETWORKING=n
CONFIG_NET_IPV6=n
CONFIG_NET_UDP=n

# TensorFlow Lite Micro (placeholder)
# CONFIG_TENSORFLOW_LITE_MICRO=n

# LoRa Support (placeholder)
# CONFIG_LORA=n

# Memory Optimization
CONFIG_SIZE_OPTIMIZATIONS=y
CONFIG_COMPILER_OPT="-Os"
CONFIG_NO_OPTIMIZATIONS=n

# Assert and Debug
CONFIG_ASSERT=y
CONFIG_ASSERT_LEVEL=1  # Reduced for production
# CONFIG_DEBUG_INFO=y  # Disabled for production

# Test Framework (optional)
CONFIG_ZTEST=n
CONFIG_ZTEST_STACKSIZE=2048

# MCU Manager (for OTA updates)
CONFIG_MCUMGR=n
CONFIG_MCUMGR_CMD_IMG_MGMT=n
CONFIG_MCUMGR_CMD_OS_MGMT=n

# Audio Processing (mock/placeholder)
# CONFIG_AUDIO=n
# CONFIG_I2S=n

# Sensors and Peripherals
CONFIG_SENSOR=y
CONFIG_GPIO=y
CONFIG_SPI=y
CONFIG_I2C=y

# Entropy and Random Number Generation
CONFIG_ENTROPY_GENERATOR=y
CONFIG_TEST_RANDOM_GENERATOR=y

# File System (for settings persistence)
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_LITTLEFS=y

# MPU and Memory Protection
CONFIG_ARM_MPU=y
CONFIG_APPLICATION_MEMORY=y

# Application Specific Settings
CONFIG_SAIT01_NODE_CAPABILITIES=0x3F
CONFIG_SAIT01_MAX_DETECTIONS=32
CONFIG_SAIT01_CORRELATION_TIMEOUT_MS=5000
CONFIG_SAIT01_MIN_CONSENSUS_NODES=2
CONFIG_SAIT01_HEARTBEAT_INTERVAL_S=10